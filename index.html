<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Comunica S√≠ndico - Cond√¥minos</title>

<style>
:root{
  --bg:#0e1c2f;
  --card:#13263f;
  --radius:18px;
}

*{box-sizing:border-box}

html,body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(180deg,#1e5799,#7db9e8);
  color:#fff;
}

/* LAYOUT */
.wrapper{
  padding:16px;
  display:grid;
  grid-template-rows:auto 1fr auto;
  gap:16px;
}

/* HEADER */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#15385c;
  padding:16px 24px;
  border-radius:20px;
}

.header h1{
  margin:0;
  font-size:24px;
  font-weight:900;
}

.badge{
  background:#0f2f4d;
  padding:8px 14px;
  border-radius:999px;
  font-weight:700;
}

/* MAIN GRID */
.main{
  display:grid;
  grid-template-columns:1.2fr 1.8fr;
  gap:16px;
}

/* ===== AVISOS PREMIUM ===== */

.avisos{
  display:grid;
  grid-template-rows:repeat(3,1fr);
  gap:16px;
}

.aviso-card{
  background:linear-gradient(145deg,#1b2e4a,#13263f);
  padding:24px;
  border-radius:20px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  border:2px solid transparent;
  box-shadow:0 8px 30px rgba(0,0,0,0.5);
  transition:.3s ease;
}
.prioridade-alta{
  border-color:#ff4d4d;
  box-shadow:0 0 20px rgba(255,0,0,0.6);
}
.prioridade-media{
  border-color:#ffc107;
  box-shadow:0 0 18px rgba(255,193,7,0.6);
}
.prioridade-baixa{
  border-color:#4caf50;
  box-shadow:0 0 18px rgba(76,175,80,0.6);
}

.aviso-header{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:20px;
  font-weight:900;
}

.aviso-body{
  margin-top:16px;
  font-size:36px;
  line-height:1.35;
}

.aviso-footer{
  margin-top:12px;
  font-size:11px;      /* <<< menor */
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  opacity:.9;
  font-weight:600;
}

.badge-prioridade{
  padding:4px 12px;
  border-radius:999px;
  font-size:12px;
  font-weight:900;
}

.badge-alta{ background:#ff4d4d; }
.badge-media{ background:#ffc107; color:#000; }
.badge-baixa{ background:#4caf50; }

/* DIREITA */
.right-col{
  display:grid;
  grid-template-rows:1.6fr auto auto;
  gap:16px;
}

.videoWrap{
  position:relative;
  border-radius:20px;
  overflow:hidden;
  background:#000;
}

.videoWrap video{
  width:100%;
  height:100%;
  object-fit:contain;
}

.videoDescricao{
  background:#14324f;
  padding:14px;
  border-radius:16px;
  font-size:14px;
}

.mensagens{
  background:#14324f;
  padding:14px;
  border-radius:16px;
  font-size:14px;
  max-height:200px;
  overflow:auto;
}

.footer{
  background:#15385c;
  padding:22px 28px;
  border-radius:20px;
  display:flex;
  flex-direction:column;
  gap:8px;
}
/* Linha do vers√≠culo */
.footer-versiculo{
  display:flex;
  justify-content:flex-start;
  font-size:18px;
  font-weight:700;
}
/* Linha do clima */
.footer-clima{
  display:flex;
  justify-content:flex-end;
  font-size:16px;
  font-weight:600;
  opacity:.9;
}


/* RESPONSIVO */
@media(max-width:900px){
  .main{ grid-template-columns:1fr; }
}
</style>
</head>

<body>

<div class="wrapper">

<div class="header">
  <h1>Comunica S√≠ndico - Cond√¥minos</h1>
  <span class="badge" id="clock">--:--</span>
</div>

<div class="main">

  <div class="avisos" id="avisosContainer"></div>

  <div class="right-col">

    <div class="videoWrap">
      <video id="adVideo" autoplay muted loop playsinline></video>
    </div>

    <div class="videoDescricao" id="videoDescricao"></div>

    <div class="mensagens" id="mensagensContainer"></div>

  </div>

</div>

<div class="footer">
  <!-- LINHA 1 ‚Äì VERS√çCULO -->
  <div class="footer-line footer-versiculo">
    <span id="versiculo"></span>
  </div>
  <!-- LINHA 2 ‚Äì CLIMA -->
  <div class="footer-line footer-clima">
    <span id="clima"></span>
  </div>

</div>


<script>

/* REL√ìGIO */
function tick(){
  const d=new Date();
  document.getElementById("clock").textContent=
    d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
}
setInterval(tick,1000); tick();

/* VARI√ÅVEIS */
let avisoIndex=0;
let avisosGlobais=[];
let videoIndex=0;
let videosGlobais=[];

/* RENDER AVISOS */
function renderAvisos(){

  const container=document.getElementById("avisosContainer");
  container.innerHTML="";
  if(!avisosGlobais.length) return;

  for(let i=0;i<3;i++){

    const a=avisosGlobais[(avisoIndex+i)%avisosGlobais.length];

    /* üî• REMOVE ACENTO AUTOMATICAMENTE */
    const prioridade = (a.prioridade || "media")
      .toLowerCase()
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g,"");

    const div=document.createElement("div");
    div.className="aviso-card prioridade-"+prioridade;

    div.innerHTML=`
      <div>
        <div class="aviso-header">
          ‚ö† ${a.titulo||""}
        </div>

        <div class="aviso-body">
          ${a.descricao||""}
        </div>
      </div>

      <div class="aviso-footer">
        <span>üìç ${a.local||""}</span>
        <span>üè∑ ${a.tipo||""}</span>
        <span class="badge-prioridade badge-${prioridade}">
          ${(a.prioridade||"").toUpperCase()}
        </span>
      </div>
    `;

    container.appendChild(div);
  }

  avisoIndex=(avisoIndex+1)%avisosGlobais.length;
}


/* ROTACIONAR V√çDEO */
function trocarVideo(){
  if(!videosGlobais.length) return;

  const v=videosGlobais[videoIndex];
  const video=document.getElementById("adVideo");
  video.src=v.arquivo;
  document.getElementById("videoDescricao").textContent=v.anunciante||"";

  videoIndex=(videoIndex+1)%videosGlobais.length;
}

/* LOAD DATA */
async function loadData(){
  try{
    const r=await fetch("./data.json?ts="+Date.now());
    const d=await r.json();

    avisosGlobais=d.avisos||[];
    videosGlobais=d.publicidade?.videos||[];

    renderAvisos();
    trocarVideo();

    const mc=document.getElementById("mensagensContainer");
    mc.innerHTML="";
    (d.mensagens||[]).forEach(m=>{
      const div=document.createElement("div");
      div.textContent=m;
      mc.appendChild(div);
    });

    document.getElementById("versiculo").textContent="\"O Senhor reina; regozije-se a terra.\"";
    document.getElementById("clima").textContent="Tubar√£o ‚Ä¢ 32¬∞C";

  }catch(e){ console.error(e); }
}

loadData();
setInterval(renderAvisos,8000);
setInterval(trocarVideo,12000);
setInterval(loadData,60000);

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Comunica S√≠ndico - Cond√¥minos</title>

<style>
:root{
  --bg:#0e1c2f;
  --card:#13263f;
  --radius:18px;
}

*{box-sizing:border-box}

html,body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(180deg,#1e5799,#7db9e8);
  color:#fff;
}

body{
  overflow-x:hidden;
}

/* LAYOUT */
.wrapper{
  min-height:100vh;
  padding:16px;
  display:grid;
  grid-template-rows:auto 1fr auto;
  gap:16px;
}

/* HEADER */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#15385c;
  padding:16px 24px;
  border-radius:20px;
}

.header h1{
  margin:0;
  font-size:24px;
  font-weight:900;
}
.header-left{
  display:flex;
  align-items:center;
  gap:14px;
}

.weather-icon{
  display:flex;
  align-items:center;
  justify-content:center;
}

/* anima√ß√£o suave da nuvem */
#cloudGroup{
  animation:cloudSpin 18s linear infinite;
  transform-origin:50% 50%;
}

@keyframes cloudSpin{
  from{transform:rotate(0deg);}
  to{transform:rotate(360deg);}
}

.badge{
  background:#0f2f4d;
  padding:8px 14px;
  border-radius:999px;
  font-weight:700;
}

/* MAIN GRID */
.main{
  display:grid;
  grid-template-columns:1.2fr 1.8fr;
  gap:16px;
  min-height:0;
}
/* ===== AVISOS PREMIUM ===== */

.avisos{
  display:grid;
  grid-template-rows:repeat(3,1fr);
  gap:16px;
  height:100%;
}

.aviso-card{
  background:linear-gradient(145deg,#1b2e4a,#13263f);
  padding:24px;
  border-radius:20px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  border:2px solid transparent;
  box-shadow:0 8px 30px rgba(0,0,0,0.5);
  transition:.3s ease;
}

.prioridade-alta{
  border-color:#ff4d4d;
  box-shadow:0 0 20px rgba(255,0,0,0.6);
}

.prioridade-media{
  border-color:#ffc107;
  box-shadow:0 0 18px rgba(255,193,7,0.6);
}

.prioridade-baixa{
  border-color:#4caf50;
  box-shadow:0 0 18px rgba(76,175,80,0.6);
}

.aviso-header{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:20px;
  font-weight:900;
}

.aviso-body{
  margin-top:16px;
  font-size:clamp(28px,3vw,42px);
  line-height:1.3;
  font-weight:500;
}

.aviso-footer{
  margin-top:12px;
  font-size:11px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  opacity:.9;
  font-weight:600;
}

.badge-prioridade{
  padding:4px 12px;
  border-radius:999px;
  font-size:12px;
  font-weight:900;
}

.badge-alta{ background:#ff4d4d; }
.badge-media{ background:#ffc107; color:#000; }
.badge-baixa{ background:#4caf50; }

/* ===== COLUNA DIREITA ===== */

.right-col{
  display:grid;
  grid-template-rows:auto auto 1fr; /* v√≠deo | descri√ß√£o | mensagens */
  gap:16px;
  min-height:0;
}

/* ===== VIDEO PROFISSIONAL ===== */

.videoWrap{
  position:relative;
  width:100%;
  aspect-ratio:16/9;
  margin:0 auto;
  border-radius:20px;
  overflow:hidden;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* v√≠deo fosco de fundo */
.videoBg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:blur(40px);
  transform:scale(1.2);
  opacity:.5;
  z-index:1;
  pointer-events:none;
}

/* v√≠deo principal */
.videoMain{
  position:relative;
  width:100%;
  height:100%;
  object-fit:contain;
  z-index:2;
  transition:opacity .6s ease;
}

/* ===== DESCRI√á√ÉO DO V√çDEO ===== */

.videoDescricao{
  background:#14324f;
  padding:16px 20px;
  border-radius:16px;
  text-align:center;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.videoAnunciante{
  font-size:20px;
  font-weight:900;
}

.videoTexto{
  font-size:14px;
  opacity:.9;
}

/* ===== MENSAGENS ===== */

.mensagens{
  background:#14324f;
  padding:14px;
  border-radius:16px;
  font-size:14px;
  overflow:auto;
  min-height:0;
}

/* ===== RODAP√â ===== */

.footer{
  background:#15385c;
  padding:22px 28px;
  border-radius:20px;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.footer-versiculo{
  display:flex;
  justify-content:flex-start;
  font-size:18px;
  font-weight:700;
}

.footer-clima{
  display:flex;
  justify-content:flex-end;
  font-size:16px;
  font-weight:600;
  opacity:.9;
}


/* RESPONSIVO */
@media(max-width:900px){
  .main{ grid-template-columns:1fr; }
}

  .videoDescricao{
  background:#14324f;
  padding:14px 18px;
  border-radius:16px;
  font-size:15px;
  font-weight:600;
  text-align:center;
  min-height:48px;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* FUNDO DESFOCADO */
#adVideoBg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:blur(40px);
  transform:scale(1.2);
  opacity:.7;
  z-index:1;
}

/* V√çDEO PRINCIPAL */
#adVideo{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
  z-index:2;
}

/* BOT√ïES */
.videoNav{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:38px;
  height:70px;
  border:none;
  border-radius:10px;
  background:rgba(0,0,0,0.25);
  backdrop-filter:blur(6px);
  color:#fff;
  font-size:28px;
  font-weight:300;
  cursor:pointer;
  opacity:.25;
  transition:.3s ease;
  z-index:3;
}
.videoNav:hover{
  opacity:.7;
  background:rgba(0,0,0,0.4);
}
.videoNav.prev{ left:8px; }
.videoNav.next{ right:8px; }

  
</style>
</head>

<body>

<div class="wrapper">

<div class="header">

  <div class="header-left">
    <h1>Comunica S√≠ndico - Cond√¥minos</h1>

    <div class="weather-icon">
      <svg viewBox="0 0 100 100" width="34" height="34">
        <defs>
          <radialGradient id="cloudGrad" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#ffffff"/>
            <stop offset="100%" stop-color="#b3e5fc"/>
          </radialGradient>
        </defs>

        <g id="cloudGroup">
          <ellipse cx="50" cy="55" rx="30" ry="18" fill="url(#cloudGrad)"/>
          <ellipse cx="35" cy="45" rx="18" ry="14" fill="url(#cloudGrad)"/>
          <ellipse cx="65" cy="45" rx="18" ry="14" fill="url(#cloudGrad)"/>
        </g>
      </svg>
    </div>

  </div>

  <span class="badge" id="clock">--:--</span>

</div>

<div class="main">

  <div class="avisos" id="avisosContainer"></div>

  <div class="right-col">

 <div class="videoWrap">
  <!-- Fundo desfocado -->
  <video id="adVideoBg"
         class="videoBg"
         autoplay
         muted
         playsinline></video>
  <!-- V√≠deo principal -->
  <video id="adVideo"
         class="videoMain"
         autoplay
         muted
         playsinline></video>
  <button class="videoNav prev" onclick="videoAnterior()">‚Äπ</button>
  <button class="videoNav next" onclick="videoProximo()">‚Ä∫</button>
</div>


<!-- BLOCO DESCRI√á√ÉO -->
<div class="videoDescricao" id="videoDescricao">
  <div class="videoAnunciante" id="videoAnunciante"></div>
  <div class="videoTexto" id="videoTexto"></div>
</div>


    <div class="mensagens" id="mensagensContainer"></div>
</div>

</div>

<div class="footer">
  <!-- LINHA 1 ‚Äì VERS√çCULO -->
  <div class="footer-line footer-versiculo">
    <span id="versiculo"></span>
  </div>
  <!-- LINHA 2 ‚Äì CLIMA -->
  <div class="footer-line footer-clima">
    <span id="clima"></span>
  </div>

</div>


<script>

/* REL√ìGIO */
function tick(){
  const d=new Date();
  document.getElementById("clock").textContent=
    d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
}
setInterval(tick,1000); tick();

/* VARI√ÅVEIS */
let avisoIndex=0;
let avisosGlobais=[];
let videoIndex=0;
let videosGlobais=[];
let mensagensGlobais=[];
let mensagemIndex=0;
let mensagemInterval=null;

/* =========================
   RSS NOT√çCIAS DA CIDADE
   ========================= */

async function buscarNoticiasCidade(cidade){

  try{

    const urlRSS = `https://news.google.com/rss/search?q=${encodeURIComponent(cidade)}&hl=pt-BR&gl=BR&ceid=BR:pt-419`;
    const api = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(urlRSS)}`;

    const r = await fetch(api);
    const dados = await r.json();

    if(dados.items && dados.items.length > 0){

      return dados.items.slice(0,5).map(n => ({
        titulo: "üì∞ Not√≠cias de " + cidade,
        texto: n.title
      }));
    }

  }catch(e){
    console.error("Erro RSS:", e);
  }

  return [];
}

/* =========================
   MENSAGENS ROTATIVAS
   ========================= */

function renderMensagem(){

  const mc = document.getElementById("mensagensContainer");
  mc.innerHTML="";

  if(!mensagensGlobais.length){
    mc.innerHTML="<div>Nenhuma mensagem no momento.</div>";
    return;
  }

  const m = mensagensGlobais[mensagemIndex];

  const div=document.createElement("div");

  if(typeof m === "object"){
    div.innerHTML=`
      <div style="font-weight:800;margin-bottom:4px;">
        ${m.titulo||""}
      </div>
      <div style="opacity:.9;">
        ${m.texto||""}
      </div>
    `;
  }else{
    div.textContent=m;
  }

  mc.appendChild(div);

  mensagemIndex=(mensagemIndex+1)%mensagensGlobais.length;
}

function iniciarMensagens(intervaloSeg){
  if(mensagemInterval) clearInterval(mensagemInterval);
  renderMensagem();
  mensagemInterval=setInterval(renderMensagem,(intervaloSeg||12)*1000);
}

/* =========================
   LOAD DATA PRINCIPAL
   ========================= */

async function loadData(){

  try{

    const r = await fetch("./data.json?ts="+Date.now());
    const d = await r.json();

    /* AVISOS */
    avisosGlobais = d.avisos || [];
    avisoIndex=0;
    renderAvisos();

    /* V√çDEOS */
    videosGlobais = d.publicidade?.videos || [];
    videoIndex=0;
    trocarVideo();

    /* =========================
       MENSAGENS + NOT√çCIAS
       ========================= */

    mensagensGlobais=[];
    mensagemIndex=0;

    const cidade = d.clima?.cidade || "Brasil";

    // 1Ô∏è‚É£ mensagens fixas (raiz)
    if(Array.isArray(d.mensagens)){
      mensagensGlobais = mensagensGlobais.concat(d.mensagens);
    }

    // 2Ô∏è‚É£ mensagens dentro de publicidade (compat√≠vel com seu JSON)
    if(Array.isArray(d.publicidade?.mensagens)){
      mensagensGlobais = mensagensGlobais.concat(d.publicidade.mensagens);
    }

    // 3Ô∏è‚É£ not√≠cias autom√°ticas
    const noticias = await buscarNoticiasCidade(cidade);
    if(noticias.length>0){
      mensagensGlobais = mensagensGlobais.concat(noticias);
    }

    iniciarMensagens(12);

  }catch(e){
    console.error("Erro loadData:",e);
  }
}

/* =========================
   VERS√çCULO DIN√ÇMICO
   ========================= */

async function carregarVersiculo(){
  try{
    const r = await fetch(
      "https://raw.githubusercontent.com/comunicasindico/comunica-sindico/main/versiculos.json?ts="+Date.now()
    );
    const dados = await r.json();

    const hoje = new Date();
    const chave =
      String(hoje.getMonth()+1).padStart(2,"0")+
      "-"+
      String(hoje.getDate()).padStart(2,"0");

    const versiculo = dados.versos?.[chave] || "‚Äî";
    document.getElementById("versiculo").textContent = versiculo;

  }catch(e){
    console.error("Erro vers√≠culo:",e);
  }
}

/* =========================
   CLIMA
   ========================= */

async function carregarClima(){

  try{

    const rJson = await fetch("./data.json?ts="+Date.now());
    const json = await rJson.json();

    const cidade = json.clima?.cidade || "Tubar√£o";
    const lat = json.clima?.latitude || -28.4667;
    const lon = json.clima?.longitude || -49.0069;

    const r = await fetch(
      `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`
    );

    const d = await r.json();
    const w = d.current_weather;

    const temp = w.temperature;
    const vento = w.windspeed;

    const sensacao = Math.round(
      13.12 + 0.6215*temp - 11.37*Math.pow(vento,0.16) +
      0.3965*temp*Math.pow(vento,0.16)
    );

    document.getElementById("clima").textContent =
      `${cidade} ‚Ä¢ ${temp}¬∞C (Sensa√ß√£o ${sensacao}¬∞C) ‚Ä¢ Vento ${vento} km/h`;

  }catch(e){
    console.error("Erro clima:",e);
  }
}

/* =========================
   INICIALIZA√á√ÉO
   ========================= */

loadData();
carregarVersiculo();
carregarClima();

setInterval(renderAvisos,8000);
setInterval(carregarClima,600000);
setInterval(loadData,1800000);      // üî• atualiza not√≠cias a cada 30 min
setInterval(carregarVersiculo,3600000);



</script>

</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Comunica Síndico — Condôminos</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#061726;
  color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  overflow:hidden;
}

.wrap{
  width:100%;
  height:100%;
  padding:12px;
  box-sizing:border-box;
}

.container{
  width:100%;
  height:100%;
  display:grid;
  grid-template-rows:auto 1fr auto;
  gap:10px;
}

/* TOPO */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 18px;
  border-radius:18px;
  background:rgba(0,0,0,.45);
  font-size:28px;
  font-weight:900;
}

/* GRID PRINCIPAL */
.main{
  display:grid;
  grid-template-columns:1fr 1fr;
  grid-template-rows:1fr 1fr 1fr;
  gap:10px;
  min-height:0;
}

#tile1{grid-column:1;grid-row:1}
#tile2{grid-column:2;grid-row:1}
#tile3{grid-column:1;grid-row:2}
#tile5{grid-column:1;grid-row:3}
#tile4{grid-column:2;grid-row:2/4}

/* TILES */
.tile{
  background:rgba(10,35,60,.85);
  border-radius:18px;
  border:2px solid #000;
  padding:16px;
  box-sizing:border-box;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.aviso-title{
  font-size:22px;
  font-weight:900;
  margin-bottom:6px;
}

.aviso-body{
  font-size:18px;
  line-height:1.35;
}

/* VÍDEO */
.videoWrap{
  width:100%;
  height:100%;
  background:#000;
  position:relative;
}

.videoWrap video{
  width:100%;
  height:100%;
  object-fit:contain;
}

/* RODAPÉ */
.footer{
  padding:10px 16px;
  border-radius:18px;
  background:rgba(0,0,0,.45);
  font-weight:900;
}

/* MOBILE */
@media(max-width:900px){
  html,body{overflow:auto}
  .container{grid-template-rows:auto auto auto}
  .main{display:flex;flex-direction:column}
  .tile{min-height:220px}
}
</style>
</head>

<body>
<div class="wrap">
  <div class="container">

    <div class="topbar">
      <div>Comunica Síndico — Condôminos</div>
      <div id="clock">--:--</div>
    </div>

    <div class="main">
      <div class="tile" id="tile1"></div>
      <div class="tile" id="tile2"></div>
      <div class="tile" id="tile3"></div>

      <div class="tile" id="tile4">
        <div class="videoWrap">
          <video id="adVideo" autoplay muted loop playsinline></video>
        </div>
      </div>

      <div class="tile" id="tile5"></div>
    </div>

    <div class="footer" id="footerBiblico">—</div>

  </div>
</div>

<script>
function tick(){
  const d=new Date();
  clock.textContent=d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
}
setInterval(tick,1000); tick();

async function loadData(){
  const r=await fetch("./data.json?ts="+Date.now());
  const d=await r.json();

  const avisos=d.avisos||[];
  ["tile1","tile2","tile3"].forEach((id,i)=>{
    const a=avisos[i];
    document.getElementById(id).innerHTML=a?
      `<div class="aviso-title">${a.titulo}</div>
       <div class="aviso-body">${a.descricao}</div>`:"";
  });

  document.getElementById("tile5").innerHTML=
    `<div class="aviso-title">Mensagens no Brasil</div>`+
    (d.mensagens||[]).join("<br>");

  document.getElementById("footerBiblico").textContent=
    d.versiculo?.texto || "—";

  const vids=d.publicidade?.videos||[];
  if(vids[0]) adVideo.src=vids[0].arquivo;
}

loadData();
setInterval(loadData,60000);

document.querySelectorAll("video").forEach(v=>{
  v.requestFullscreen=()=>{};
  v.webkitEnterFullscreen=()=>{};
});
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Comunica S√≠ndico - Cond√¥minos</title>

<style>

/* =========================================================
   ITEM 001 ‚Äì VARI√ÅVEIS GLOBAIS
   ========================================================= */

:root{
  --bg:#0e1c2f;
  --card:#13263f;
  --radius:18px;
}

/* =========================================================
   ITEM 002 ‚Äì RESET BASE
   ========================================================= */

*{box-sizing:border-box}

html,body{
  margin:0;
  height:100%;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(180deg,#1e5799,#7db9e8);
  color:#fff;
}

body{
  overflow:hidden; /* üîí trava reorganiza√ß√£o */
}

/* =========================================================
   ITEM 003 ‚Äì WRAPPER PRINCIPAL
   ========================================================= */

.wrapper{
  height:100vh;
  padding:16px;
  display:grid;
  grid-template-rows:auto 1fr auto;
  gap:16px;
}

/* =========================================================
   ITEM 004 ‚Äì HEADER
   ========================================================= */

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#15385c;
  padding:16px 24px;
  border-radius:20px;
}

.header h1{
  margin:0;
  font-size:24px;
  font-weight:900;
}

.badge{
  background:#0f2f4d;
  padding:8px 14px;
  border-radius:999px;
  font-weight:700;
}

/* =========================================================
   ITEM 005 ‚Äì GRID FIXO DESKTOP 2x2
   ========================================================= */

.main{
  display:grid;
  grid-template-columns:1.2fr 1.8fr;
  gap:16px;
  height:100%;
}

/* =========================================================
   ITEM 006 ‚Äì AVISOS (COLUNA ESQUERDA)
   ========================================================= */

.avisos{
  display:grid;
  grid-template-rows:repeat(3,1fr);
  gap:16px;
  height:100%;
}

.aviso-card{
  background:linear-gradient(145deg,#1b2e4a,#13263f);
  padding:20px;
  border-radius:20px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  box-shadow:0 8px 30px rgba(0,0,0,0.5);
}

.aviso-header{
  font-weight:900;
  font-size:18px;
}

.aviso-body{
  margin-top:12px;
  font-size:clamp(22px,2.2vw,32px);
  line-height:1.3;
}

/* =========================================================
   ITEM 007 ‚Äì COLUNA DIREITA
   ========================================================= */

.right-col{
  display:grid;
  grid-template-rows:1fr auto auto;
  gap:16px;
  height:100%;
}

/* =========================================================
   ITEM 008 ‚Äì V√çDEO
   ========================================================= */

.videoWrap{
  position:relative;
  border-radius:20px;
  overflow:hidden;
  background:#000;
}

#adVideoBg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:blur(40px);
  transform:scale(1.2);
  opacity:.7;
}

#adVideo{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
}

/* =========================================================
   ITEM 009 ‚Äì DESCRI√á√ÉO DO V√çDEO
   ========================================================= */

.videoDescricao{
  background:#14324f;
  padding:14px;
  border-radius:16px;
  text-align:center;
}

/* =========================================================
   ITEM 010 ‚Äì MENSAGENS
   ========================================================= */

.mensagens{
  background:#14324f;
  padding:14px;
  border-radius:16px;
  font-size:14px;
  overflow:auto;
}

/* =========================================================
   ITEM 011 ‚Äì RODAP√â
   ========================================================= */

.footer{
  background:#15385c;
  padding:20px 28px;
  border-radius:20px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

/* =========================================================
   ITEM 012 ‚Äì MOBILE REAL APENAS
   ========================================================= */

@media (max-width: 768px){
  body{ overflow:auto; }

  .main{
    grid-template-columns:1fr;
  }
}

/* =========================================================
   ITEM 013 ‚Äì BOT√ïES V√çDEO
   ========================================================= */

.videoNav{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:36px;
  height:60px;
  border:none;
  border-radius:10px;
  background:rgba(0,0,0,0.25);
  color:#fff;
  font-size:24px;
  cursor:pointer;
}

.videoNav.prev{ left:8px; }
.videoNav.next{ right:8px; }

</style>
</head>

<body>

<div class="wrapper">

<!-- =========================================================
     ITEM 014 ‚Äì HEADER HTML
     ========================================================= -->

<div class="header">
  <h1>Comunica S√≠ndico - Cond√¥minos</h1>
  <span class="badge" id="clock">--:--</span>
</div>

<!-- =========================================================
     ITEM 015 ‚Äì MAIN
     ========================================================= -->

<div class="main">

  <div class="avisos" id="avisosContainer"></div>

  <div class="right-col">

    <div class="videoWrap">
      <video id="adVideoBg" autoplay muted loop playsinline></video>
      <video id="adVideo" autoplay muted loop playsinline></video>
      <button class="videoNav prev" onclick="videoAnterior()">‚Äπ</button>
      <button class="videoNav next" onclick="videoProximo()">‚Ä∫</button>
    </div>

    <div class="videoDescricao" id="videoDescricao"></div>

    <div class="mensagens" id="mensagensContainer"></div>

  </div>

</div>

<!-- =========================================================
     ITEM 016 ‚Äì FOOTER
     ========================================================= -->

<div class="footer">
  <div id="versiculo"></div>
  <div id="clima"></div>
</div>

</div>

<script>

/* =========================================================
   ITEM 017 ‚Äì REL√ìGIO
   ========================================================= */

function tick(){
  const d=new Date();
  document.getElementById("clock").textContent=
    d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
}
setInterval(tick,1000); tick();

/* =========================================================
   ITEM 018 ‚Äì LIMITADOR DE TEXTO (200 CARACTERES)
   ========================================================= */

function limitarTexto(texto){
  if(!texto) return "";
  if(texto.length <= 200) return texto;
  return texto.substring(0,200) + "...";
}

/* =========================================================
   ITEM 019 ‚Äì AVISOS
   ========================================================= */

let avisosGlobais=[];
let avisoIndex=0;

function renderAvisos(){

  const container=document.getElementById("avisosContainer");
  container.innerHTML="";

  for(let i=0;i<3;i++){

    if(!avisosGlobais.length) return;

    const a=avisosGlobais[(avisoIndex+i)%avisosGlobais.length];

    const div=document.createElement("div");
    div.className="aviso-card";

    div.innerHTML=`
      <div class="aviso-header">‚ö† ${a.titulo||""}</div>
      <div class="aviso-body">${limitarTexto(a.descricao||"")}</div>
    `;

    container.appendChild(div);
  }

  avisoIndex=(avisoIndex+1)%avisosGlobais.length;
}

/* =========================================================
   ITEM 020 ‚Äì V√çDEOS
   ========================================================= */

let videosGlobais=[];
let videoIndex=0;

function trocarVideo(){

  if(!videosGlobais.length) return;

  const v=videosGlobais[videoIndex];
  const video=document.getElementById("adVideo");

  video.src=v.arquivo+"?ts="+Date.now();
  video.load();
  video.play().catch(()=>{});

  document.getElementById("videoDescricao").innerHTML=
    `<strong>${v.anunciante||""}</strong><br>${v.descricao||""}`;

  video.onended=function(){
    videoIndex=(videoIndex+1)%videosGlobais.length;
    trocarVideo();
  }
}

function videoProximo(){
  videoIndex=(videoIndex+1)%videosGlobais.length;
  trocarVideo();
}

function videoAnterior(){
  videoIndex=(videoIndex-1+videosGlobais.length)%videosGlobais.length;
  trocarVideo();
}

/* =========================================================
   ITEM 021 ‚Äì LOAD DATA
   ========================================================= */

async function loadData(){
  const r=await fetch("./data.json?ts="+Date.now());
  const d=await r.json();

  avisosGlobais=d.avisos||[];
  videosGlobais=d.publicidade?.videos||[];

  renderAvisos();
  trocarVideo();
}

loadData();
setInterval(renderAvisos,8000);
setInterval(loadData,60000);

</script>

</body>
</html>

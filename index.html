<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Comunica Síndico — Condôminos</title>

<link rel="manifest" href="./manifest-condominos.json">
<meta name="theme-color" content="#0b223a">

<script>
(function(){
  const ua=(navigator.userAgent||"").toLowerCase();
  const looksMobile=/mobi|iphone|ipod|ipad|android.*mobile/.test(ua);
  const root=document.documentElement;
  root.classList.toggle("isMobile",looksMobile);
})();
</script>

<style>
html,body{
  margin:0;
  height:100%;
  background:linear-gradient(180deg,#061726,#0b1f33);
  color:#fff;
  font-family:system-ui,Segoe UI,Arial;
  overflow:hidden;
}
.wrap{height:100dvh;padding:10px}
.container{height:100%;display:flex;flex-direction:column;gap:10px}
.main{flex:1;min-height:0;display:flex;flex-direction:column;gap:10px}

.topbar{display:flex;justify-content:space-between;align-items:center}
.rightInfo{text-align:right}

.quadTop{
  flex:1;
  display:grid;
  grid-template-columns:1fr 1fr;
  grid-template-rows:repeat(3,1fr);
  gap:10px;
}
#tile1{grid-column:1;grid-row:1}
#tile2{grid-column:2;grid-row:1}
#tile3{grid-column:1;grid-row:2}
#slot5{grid-column:1;grid-row:3}
#tile4{grid-column:2;grid-row:2/4}

.panel{background:#0003;border-radius:14px;padding:8px}
.videoWrap{position:relative;height:100%}
.videoWrap video{width:100%;height:100%;object-fit:cover}

html.isMobile body{overflow:auto}
html.isMobile .quadTop{display:flex;flex-direction:column}
</style>
</head>

<body>
<div class="wrap">
<div class="container">

<div class="topbar">
  <div>Comunica Síndico</div>
  <div class="rightInfo"><span id="clock">--:--</span></div>
</div>

<div class="main">
  <div class="quadTop">
    <div class="panel" id="tile1"><div id="slot1"></div></div>
    <div class="panel" id="tile2"><div id="slot2"></div></div>
    <div class="panel" id="tile3"><div id="slot3"></div></div>

    <div class="panel" id="tile4">
      <div class="videoWrap">
        <video id="adVideoBg" muted autoplay loop playsinline></video>
        <video id="adVideo" muted autoplay playsinline></video>
      </div>
    </div>

    <div class="panel" id="slot5">
      <div id="newsBody"></div>
    </div>
  </div>
</div>

</div>
</div>

<script>
function pad(n){return String(n).padStart(2,"0")}
function tick(){
  const d=new Date();
  clock.textContent=pad(d.getHours())+":"+pad(d.getMinutes());
}
setInterval(tick,1000);tick();

async function loadAll(){
  try{
    const r=await fetch("data.json?ts="+Date.now());
    const d=await r.json();
    adVideo.src=d.publicidade?.videos?.[0]?.arquivo||"";
    adVideoBg.src=adVideo.src;
  }catch(e){}
}
loadAll();
</script>
</body>
</html>
